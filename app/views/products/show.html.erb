  <div class="form-group">
      <%= render 'search_form' %>
    </div>
<div class="row">
  <div class="col-md-6">
    <%= image_tag @product.image(:medium) %> 
  </div>

  <div class="col-md-6">
    <h3><%= @product.title %></h3>
    <p><%= number_to_currency(@product.price) %></p>
    <p><%= @product.description %></p>
    <p><em>Shipping: </em><%= number_to_currency(@product.shipping_cost) %></p>
    <p><em>Tags:<em> <%= raw @product.tags.map(&:name).map { |t| link_to t, tag_path(t) }.join(', ') %></p>
    <p class="mt-5">
                  <%= form_tag charges_path do %>

                    <%= hidden_field_tag "product_id", @product.id %>

                   

                    <article>
                      <% if flash[:error].present? %>
                        <div id="error_explanation">
                          <p><%= flash[:error] %></p>
                        </div>
                      <% end %>
                    </article>


                    <script src="https://checkout.stripe.com/checkout.js" class="stripe-button"
                            data-key="<%= Rails.configuration.stripe[:publishable_key] %>"
                            data-description="<%= @product.title %>"
                            data-amount="<%= (@product.price + @product.shipping_cost) * 100 %>"
                            data-billing-address="true"
                            data-shipping-address="true"
                            <% if user_signed_in? %>
                              data-email="<%= current_user.email %>"
                            <% end %>
                            data-allow-remember-me="true"
                            data-locale="auto">

                    </script>
                <% end %>
    </p>
  </div>
  
</div>


      <% if user_signed_in? %>
        <% if @product.user.id == current_user.id %>
          <div class="row m-4">
            <div class="col text-center">
              <%= link_to 'Edit', edit_product_path(@product) %> |
              <%= link_to 'Delete', @product, method: :delete, data: { confirm: 'Are you sure?' } %>
            </div>
          </div>
        <% end %>
      <% end %>
    </div>
  </div>
</div>
