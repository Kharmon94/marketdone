  <div class="form-group">
      <%= render 'search_form' %>
    </div>
<div class="row">
  <div class="col-md-6">
    <%= image_tag @product.image(:medium) %> 
  </div>

  <div class="col-md-6">
    <h3><%= @product.title %></h3>
    <p><em>Price: </em><%= number_to_currency(@product.price) %></p>
    <p><em>Shipping Price: </em><%= number_to_currency(@product.shipping_cost) %></p>
    <p><em>Color:</em> <%= @product.color %></p>
    <p><em>Condition:</em> <%= @product.condition %></p>
    <p><em>Description:</em> <%= @product.description %></p>
    <%= link_to @product.user.username, user_path(@product) %>
    <p class="mt-5">
                  <%= form_tag charges_path do %>

                    <%= hidden_field_tag "product_id", @product.id %>
                    
                   

                    <article>
                      <% if flash[:error].present? %>
                        <div id="error_explanation">
                          <p><%= flash[:error] %></p>
                        </div>
                      <% end %>
                    </article>


                    <script src="https://checkout.stripe.com/checkout.js" class="stripe-button"
                            data-key="<%= Rails.configuration.stripe[:publishable_key] %>"
                            data-description="NAME: <%= @product.title %>, COLOR: <%= @product.color %> "
                            data-amount="<%= (@product.price + @product.shipping_cost) * 100 %>"
                            data-billing-address="true"
                            data-shipping-address="true"
                            <% if user_signed_in? %>
                              data-email="<%= current_user.email %>"
                            <% end %>
                            data-allow-remember-me="true"
                            data-locale="auto">

                    </script>
                <% end %>
    </p>
    <script>
      $('#payment_quantity').keyup(function() {
          var quantity = $('#payment_quantity').val();
          $("input[name='item_quantity_1']").val(quantity);
          return false;
      });
    </script>
    
    
  </div>
  <div class="row">
    <div class="col-md-6" id="review_dis">
      <%= link_to "Add Review", new_product_review_path(@product), :class => "btn btn-primary" %><br>
       <%= render @product.reviews %>
    </div>
  </div>

  
</div>


      <% if user_signed_in? %>
        <% if @product.user.id == current_user.id %>
          <div class="row m-4">
            <div class="col text-center">
              <%= link_to 'Edit', edit_product_path(@product) %> |
              <%= link_to 'Delete', @product, method: :delete, data: { confirm: 'Are you sure?' } %>
            </div>
          </div>
        <% end %>
      <% end %>
    </div>
  </div>
</div>

<script>
  $('.review-rating').raty({
    path: '/assets',
    readOnly: true,
    score: function(){
      return $(this).attr('data-score')
    }
  });
</script>